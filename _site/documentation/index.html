<!DOCTYPE html>
<html lang="en-us"><head>
  <link href="http://gmpg.org/xfn/11" rel="profile" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />

  <title>
    
      Documentation &middot; Accelerate
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/assets/css/main.css" />

  <!-- Icons -->
  <!--link rel="apple-touch-icon-precomposed" sizes="144x144" href="/favicon.png" /-->
<link rel="shortcut icon" href="/favicon.ico" />

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml" />

  <!-- Additional head bits without overriding original head -->
</head>
<body class="page"><div id="sidebar">
    <div class="stretch"></div>
  <input type="checkbox" id="hamburger-button" />
  <header>
   <div class="title-line">
    <h1 class="site-title"><a href="/">Accelerate</a></h1>
    <div class="hamburger-icon">
        <label for="hamburger-button"><span class="open"></span><span class="close"></span></label>
    </div>
   </div>
   <p class="lead">A flexible cross-platform assembler for retro computers.</p></header><nav id="sidebar-nav-links">
    <ul><li class="page-link active">Documentation</li><a href="/license/"><li class="page-link">License</li></a><a href="https://github.com/T-Pau/Accelerate"><li class="page-link">Repository</li></a></ul>
</nav>
<nav id="sidebar-icon-links">
    <ul><a id="github-link"
       class="icon" title="Github Project" aria-label="Github Project"
       href="https://github.com/T-Pau/Accelerate">
      <li><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 28"><path d="M12 2c6.625 0 12 5.375 12 12 0 5.297-3.437 9.797-8.203 11.391-0.609 0.109-0.828-0.266-0.828-0.578 0-0.391 0.016-1.687 0.016-3.297 0-1.125-0.375-1.844-0.812-2.219 2.672-0.297 5.484-1.313 5.484-5.922 0-1.313-0.469-2.375-1.234-3.219 0.125-0.313 0.531-1.531-0.125-3.187-1-0.313-3.297 1.234-3.297 1.234-0.953-0.266-1.984-0.406-3-0.406s-2.047 0.141-3 0.406c0 0-2.297-1.547-3.297-1.234-0.656 1.656-0.25 2.875-0.125 3.187-0.766 0.844-1.234 1.906-1.234 3.219 0 4.594 2.797 5.625 5.469 5.922-0.344 0.313-0.656 0.844-0.766 1.609-0.688 0.313-2.438 0.844-3.484-1-0.656-1.141-1.844-1.234-1.844-1.234-1.172-0.016-0.078 0.734-0.078 0.734 0.781 0.359 1.328 1.75 1.328 1.75 0.703 2.141 4.047 1.422 4.047 1.422 0 1 0.016 1.937 0.016 2.234 0 0.313-0.219 0.688-0.828 0.578-4.766-1.594-8.203-6.094-8.203-11.391 0-6.625 5.375-12 12-12zM4.547 19.234c0.031-0.063-0.016-0.141-0.109-0.187-0.094-0.031-0.172-0.016-0.203 0.031-0.031 0.063 0.016 0.141 0.109 0.187 0.078 0.047 0.172 0.031 0.203-0.031zM5.031 19.766c0.063-0.047 0.047-0.156-0.031-0.25-0.078-0.078-0.187-0.109-0.25-0.047-0.063 0.047-0.047 0.156 0.031 0.25 0.078 0.078 0.187 0.109 0.25 0.047zM5.5 20.469c0.078-0.063 0.078-0.187 0-0.297-0.063-0.109-0.187-0.156-0.266-0.094-0.078 0.047-0.078 0.172 0 0.281s0.203 0.156 0.266 0.109zM6.156 21.125c0.063-0.063 0.031-0.203-0.063-0.297-0.109-0.109-0.25-0.125-0.313-0.047-0.078 0.063-0.047 0.203 0.063 0.297 0.109 0.109 0.25 0.125 0.313 0.047zM7.047 21.516c0.031-0.094-0.063-0.203-0.203-0.25-0.125-0.031-0.266 0.016-0.297 0.109s0.063 0.203 0.203 0.234c0.125 0.047 0.266 0 0.297-0.094zM8.031 21.594c0-0.109-0.125-0.187-0.266-0.172-0.141 0-0.25 0.078-0.25 0.172 0 0.109 0.109 0.187 0.266 0.172 0.141 0 0.25-0.078 0.25-0.172zM8.937 21.438c-0.016-0.094-0.141-0.156-0.281-0.141-0.141 0.031-0.234 0.125-0.219 0.234 0.016 0.094 0.141 0.156 0.281 0.125s0.234-0.125 0.219-0.219z"></path>
</svg>
</li>
    </a>
  
  
  <a id="subscribe-link"
     class="icon" title="Subscribe" aria-label="Subscribe"
     href="/feed.xml">
    <li><svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <circle cx="6.18" cy="17.82" r="2.18"/>
    <path d="M4 4.44v2.83c7.03 0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9 0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z"/>
</svg></li>
  </a></ul>
</nav>
<p class="copyright">&copy; 2023 by Dieter Baron.</p>
</div>
<main class="container">
<h1 class="page-title">Documentation</h1>
<h1 id="introduction">Introduction</h1>

<p>Accelerate is a cross-assembler that runs on modern computers. It translates programs for retro computers written in assembly language into binaries that can run on those computers. It supports a variety of computers and CPU families, and adding support for even more is relatively easy and can be done without changing and recompiling the assemlber itself.</p>

<p>All source, definition, and intermediary files are text files, although the latter are not meant to be edited by hand.</p>

<p>The program is organized into <strong>source files</strong> and <strong>libraries</strong>, which contain <strong>objects</strong>, <strong>constants</strong>, <strong>macros</strong>, and <strong>functions</strong>. The assembly process is directed by a  <strong>target definition</strong>, which references a <strong>CPU definition</strong>.</p>

<h1 id="assembler-soruce-file">Assembler Soruce File</h1>

<p>A source file contains definitions that will be translated to an <strong>object file</strong>, a <strong>library</strong> or a <strong>binary program</strong>.</p>

<p>It consists of a list of elements and directives, separated by newlines. Instructions, labels, and assignments within an <strong>object</strong> or <strong>macro</strong> are also separated by newlines.</p>

<h2 id="directives">Directives</h2>

<h3 id="section"><code class="language-plaintext highlighter-rouge">.section</code></h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.section &lt;section-name&gt;
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">.section</code> directive specifies which section the following objects will be placed in. This determines where in memory they will be placed, and whether they will be included in the <strong>binary program</strong> (<strong>data objects</strong>) or not (<strong>reservation objects</strong>).</p>

<h3 id="scope"><code class="language-plaintext highlighter-rouge">.scope</code></h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.scope [public|private]
</code></pre></div></div>
<p>The <code class="language-plaintext highlighter-rouge">.scope</code> directive specifies the visibility of the following elements. <code class="language-plaintext highlighter-rouge">private</code> elements are only visible within the same module (library or the main program). <code class="language-plaintext highlighter-rouge">public</code> elements are also visible to modules using a library.</p>

<h3 id="target"><code class="language-plaintext highlighter-rouge">.target</code></h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.target "&lt;target-name&gt;"
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">.target</code> directive specifies which <strong>target definition</strong> file will be used in translating the file.</p>

<h2 id="elements">Elements</h2>

<h3 id="objects">Objects</h3>

<p>There are two kinds of objects:</p>

<p><strong>Data objects</strong> contain code or other data and are saved in the resulting program binary:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[.private|.public] &lt;name&gt; [.align &lt;alignment&gt;] [.address &lt;address&gt;] {
    &lt;body&gt;
}
</code></pre></div></div>

<p><strong>Reservation objects</strong> only reserve a certain amount of memory, which will not be initialized and is usually not saved in the resulting program binary:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[.private|.public] &lt;name&gt; [.align &lt;alignment&gt;] [.address &lt;address&gt;] .reserve &lt;length&gt;
</code></pre></div></div>

<h3 id="constants">Constants</h3>

<p>Constants define values that can be used in other parts of the program. They can refer to other constants or objects (which results in their address).</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[.private|.public] &lt;name&gt; = &lt;value&gt;
</code></pre></div></div>

<h3 id="macros">Macros</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[.private|.public] .macro &lt;name&gt; [&lt;argument&gt;[=&lt;default-value&gt;], ...] {
    &lt;body&gt;
}
</code></pre></div></div>

<h3 id="functions">Functions</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[.private|.public] &lt;name&gt; ([&lt;argument&gt;[=&lt;default-value&gt;, ...]) = &lt;value&gt;
</code></pre></div></div>

<h1 id="library">Library</h1>

<p>A library is a collection of <strong>objects</strong>, <strong>constants</strong>, <strong>macros</strong>, and <strong>functions</strong>.</p>

<p>When importing a library, only the objects actually used will be included in the resulting binary program. This gives you flexibility in how you organize your code: even using only a small portion of a large library does not sacrifice efficiencey.</p>

<h1 id="target-definition">Target Definition</h1>

<h1 id="cpu-definition">CPU Definition</h1>

<h1 id="expressions">Expressions</h1>

<p>Expressions are used in various places in a program.</p>

<h2 id="types">Types</h2>

<h3 id="boolean">Boolean</h3>

<p>A boolean is either <code class="language-plaintext highlighter-rouge">true</code> or <code class="language-plaintext highlighter-rouge">false</code>. Numbers and strings can be implicitly converted to boolean, with <code class="language-plaintext highlighter-rouge">0</code> and the empty string being <code class="language-plaintext highlighter-rouge">false</code> and all others being <code class="language-plaintext highlighter-rouge">true</code>.</p>

<h3 id="signed-integers">Signed Integers</h3>

<p>A signed integer with a maximum precision of 64 bits, giving a value range of -9,223,372,036,854,775,808 to 9,223,372,036,854,775,807.</p>

<h3 id="unsigned-integer">Unsigned Integer</h3>

<p>An unsigned integer with a maximum precision of 64 bits, giving a value range of 0 to 18,446,744,073,709,551,615.</p>

<h3 id="floating-point-number">Floating Point Number</h3>

<p>A floating point number expressed as a <strong>double</strong>.</p>

<h3 id="string">String</h3>

<h2 id="operators">Operators</h2>

<h3 id="unary-operators">Unary Operators</h3>

<p>All unary operators are followed by their operand and have higher precedence than binary operators.</p>

<h4 id="-logical-not"><code class="language-plaintext highlighter-rouge">!</code> (Logical Not)</h4>

<p>Converts its operand to boolean and negates it. The result is always boolean.</p>

<h4 id="-unary-plus"><code class="language-plaintext highlighter-rouge">+</code> (Unary Plus)</h4>

<p>The operand must be a number, the result is the operand unchanged.</p>

<h4 id="--unary-minus"><code class="language-plaintext highlighter-rouge">-</code> (Unary Minus)</h4>

<p>The operand must be a number, the result is the negative operand.</p>

<h4 id="-bank-byte"><code class="language-plaintext highlighter-rouge">^</code> (Bank Byte)</h4>

<p>The operand must be an unsigned integer, the result is the third lowest byte of the operand.</p>

<h4 id="-low-byte"><code class="language-plaintext highlighter-rouge">&lt;</code> (Low Byte)</h4>

<p>The operand must be an unsigned integer, the result is the lowest byte of the operand.</p>

<h4 id="-hight-byte"><code class="language-plaintext highlighter-rouge">&gt;</code> (Hight Byte)</h4>

<p>The operand must be an unsigned integer, the result is the second lowest byte of the operand (high byte of a 16-bit value).</p>

<h4 id="-bitwise-not"><code class="language-plaintext highlighter-rouge">~</code> (Bitwise Not)</h4>

<p>The operand must be an unsigned integer, the result is the operand with each bit inverted.</p>

<h3 id="binary-operators">Binary Operators</h3>

<p>All binary operators are left associative. The following list shows their relative precedence from high to low; operands on one line have the same precedence:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">&lt;&lt;</code> (Shift Left), <code class="language-plaintext highlighter-rouge">&gt;&gt;</code> (Shift Right)</li>
  <li><code class="language-plaintext highlighter-rouge">*</code> (Multiply), <code class="language-plaintext highlighter-rouge">/</code> (Divide), <code class="language-plaintext highlighter-rouge">&amp;</code> (Bitwise And)</li>
  <li><code class="language-plaintext highlighter-rouge">+</code> (Add), <code class="language-plaintext highlighter-rouge">-</code> (Subtract), <code class="language-plaintext highlighter-rouge">|</code> (Bitwise Or), <code class="language-plaintext highlighter-rouge">^</code> (Bitwise Exclusive Or)</li>
  <li><code class="language-plaintext highlighter-rouge">=</code> (Equal), <code class="language-plaintext highlighter-rouge">!=</code> (Not Equal), <code class="language-plaintext highlighter-rouge">&lt;</code> (Less), <code class="language-plaintext highlighter-rouge">&lt;=</code> (Less Than), <code class="language-plaintext highlighter-rouge">&gt;</code> (Greater), <code class="language-plaintext highlighter-rouge">&gt;=</code> (Greater Than)</li>
  <li><code class="language-plaintext highlighter-rouge">&amp;&amp;</code> (Logical And)</li>
  <li><code class="language-plaintext highlighter-rouge">||</code> (Logical Or)</li>
</ul>

<h4 id="-shift-left"><code class="language-plaintext highlighter-rouge">&lt;&lt;</code> (Shift Left)</h4>

<p>Both operands must be integers. The left operand is shifted to the left by the number of bits of the value of the right operand. The result has the same type as the left operand.</p>

<h4 id="-shift-right"><code class="language-plaintext highlighter-rouge">&gt;&gt;</code> (Shift Right)</h4>

<p>Both operands must be integers. The left operand is shifted to the left by the number of bits of the value of the right operand. The result has the same type as the left operand.</p>

<h4 id="-multiply"><code class="language-plaintext highlighter-rouge">*</code> (Multiply)</h4>

<p>Both operands must be numbers. The result is the product of the two operands. If both operands are integers, the result is an integer, otherwise a float point number.</p>

<h4 id="-divide"><code class="language-plaintext highlighter-rouge">/</code> (Divide)</h4>

<p>Both operands must be numbers. If both operands are integers, the result is the quotient of the two operands, otherwise a floating point division is performed.</p>

<h4 id="-bitwise-and"><code class="language-plaintext highlighter-rouge">&amp;</code> (Bitwise And)</h4>

<p>Both operands must be unsigned integers. The result is the bitwise and of the two operands.</p>

<h4 id="-add"><code class="language-plaintext highlighter-rouge">+</code> (Add)</h4>

<p>Both operands must be numbers. The result is the sum of the two operands. If both operands are integers, the result is an integer, otherwise a float point number.</p>

<h4 id="--subtract"><code class="language-plaintext highlighter-rouge">-</code> (Subtract)</h4>

<p>Both operands must be numbers. The result is the difference of the two operands. If both operands are integers, the result is an integer, otherwise a float point number.</p>

<h4 id="-bitwise-or"><code class="language-plaintext highlighter-rouge">|</code> (Bitwise Or)</h4>

<p>Both operands must be unsigned integers. The result is the bitwise or of the two operands.</p>

<h4 id="-bitwise-exclusive-or"><code class="language-plaintext highlighter-rouge">^</code> (Bitwise Exclusive Or)</h4>

<p>Both operands must be unsigned integers. The result is the bitwise exclusive or of the two operands.</p>

<h4 id="-equal"><code class="language-plaintext highlighter-rouge">!</code> (Equal)</h4>

<p>Both operands must be either booleans, numbers, or strings. The result is <code class="language-plaintext highlighter-rouge">true</code> if both operands are the same, <code class="language-plaintext highlighter-rouge">false</code> otherwise.</p>

<h4 id="-not-equal"><code class="language-plaintext highlighter-rouge">!=</code> (Not Equal)</h4>

<p>Both operands must be either booleans, numbers, or strings. The result is <code class="language-plaintext highlighter-rouge">false</code> if both operands are the same, <code class="language-plaintext highlighter-rouge">true</code> otherwise.</p>

<h4 id="-less"><code class="language-plaintext highlighter-rouge">&lt;</code> (Less)</h4>

<p>Both operands must be either numbers or strings. The result is <code class="language-plaintext highlighter-rouge">false</code> if the left operand is less than the right, <code class="language-plaintext highlighter-rouge">true</code> otherwise.</p>

<h4 id="-less-equal"><code class="language-plaintext highlighter-rouge">&lt;=</code> (Less Equal)</h4>

<p>Both operands must be either numbers or strings. The result is <code class="language-plaintext highlighter-rouge">false</code> if the left operand is grelessater than or equal to the right, <code class="language-plaintext highlighter-rouge">true</code> otherwise.</p>

<h4 id="-greater"><code class="language-plaintext highlighter-rouge">&gt;</code> (Greater)</h4>

<p>Both operands must be either numbers or strings. The result is <code class="language-plaintext highlighter-rouge">false</code> if the left operand is greater than the right, <code class="language-plaintext highlighter-rouge">true</code> otherwise.</p>

<h4 id="-greater-equal"><code class="language-plaintext highlighter-rouge">&gt;=</code> (Greater Equal)</h4>

<p>Both operands must be either numbers or strings. The result is <code class="language-plaintext highlighter-rouge">false</code> if the left operand is greater than or equal to the right, <code class="language-plaintext highlighter-rouge">true</code> otherwise.</p>

<h4 id="-logical-and"><code class="language-plaintext highlighter-rouge">&amp;&amp;</code> (Logical And)</h4>

<p>Both operands are converted to boolean. The result is <code class="language-plaintext highlighter-rouge">true</code> if both operands are true, <code class="language-plaintext highlighter-rouge">false</code> otherwise.</p>

<h4 id="-logical-or"><code class="language-plaintext highlighter-rouge">||</code> (Logical Or)</h4>

<p>Both operands are converted to boolean. The result is <code class="language-plaintext highlighter-rouge">true</code> if at least one operand is true, <code class="language-plaintext highlighter-rouge">false</code> otherwise.</p>


</main><!-- Optional footer content -->
</body>
</html>
